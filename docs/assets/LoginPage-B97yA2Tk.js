import{r as d,u as L,c as f,a as g,b as o,w as r,o as u,d as E,e as i,f as y,g as P,E as x,h as S,l as U}from"./index-BYnOmLgs.js";import{E as $,a as A,b as F}from"./el-form-item-BfmFyFZr.js";import{E as I}from"./el-row-B8trYvL9.js";import{E as M,a as R}from"./el-input-f41vfBh9.js";import{E as Z}from"./el-link-DD8S28WR.js";import{u as j}from"./user-CD6z7JRO.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-CvswaA_c.js";const O={class:"login-page"},T={class:"form"},D={key:0},G={key:1},J={class:"flex"},K={__name:"LoginPage",setup(Q){const _=d(!0),n=d(!0),c=d(),v=L(),w=P(),a=d({username:"",password:"",repassword:"",phoneNum:""});function V(l,e,s){/^\d{11}$/.test(e)?s():s(new Error("请输入有效的手机号"))}function k(l,e,s){/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e)?s():s(new Error("请输入有效的金额（保留两位小数）"))}const h={username:[{required:!0,message:"未输入用户名",trigger:"blur"},{min:5,message:"用户名必须是 5位 以上的字符",trigger:"blur"}],phoneNum:[{required:!0,message:"未输入电话号码",trigger:"manual"},{validator:V,trigger:"manual"}],password:[{required:!0,message:"未输入密码",trigger:"manual"},{min:8,message:"密码长度至少为8个字符",trigger:"manual"},{validator:k,message:"密码需要包含字母和数字",trigger:"manual"}],repassword:[{required:!0,message:"未输入密码",trigger:"manual"},{min:8,message:"密码长度至少为8个字符",trigger:"manual"},{validator:k,message:"密码需要包含字母和数字",trigger:"manual"},{validator:(l,e,s)=>{e!==a.value.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]},b=async()=>{await c.value.validate();const l=await j({username:a.value.username,password:a.value.password}),e=l.headers.authorization||l.headers.Authorization||"";v.token=e?e.split(" ")[1]:"",v.user={username:a.value.username,phoneNum:a.value.phoneNum},x.success("登录成功"),n.value?w.push("/admin"):w.push("/screen")},N=()=>{x.warning("仔细想想 就想起来了")};return(l,e)=>{const s=A,m=M,B=F,C=Z,p=R,z=I,q=$;return u(),f("div",O,[e[10]||(e[10]=g("div",{class:"bg"},null,-1)),g("div",T,[o(q,{model:a.value,rules:h,ref_key:"form",ref:c,size:"large",autocomplete:"off"},{default:r(()=>[o(s,null,{default:r(()=>[n.value?(u(),f("h1",D,"管理端登录")):(u(),f("h1",G,"大屏端登录"))]),_:1}),o(s,{prop:"username"},{default:r(()=>[o(m,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.username=t),"prefix-icon":E(S),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),o(s,{prop:"password"},{default:r(()=>[o(m,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.password=t),name:"password","prefix-icon":E(U),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),o(s,{class:"flex"},{default:r(()=>[g("div",J,[o(B,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t)},{default:r(()=>e[5]||(e[5]=[i("记住我")])),_:1},8,["modelValue"]),o(C,{type:"primary",underline:!1,onClick:N},{default:r(()=>e[6]||(e[6]=[i("忘记密码？")])),_:1})])]),_:1}),o(z,{justify:"space-between"},{default:r(()=>[o(s,{style:{width:"120px"}},{default:r(()=>[o(p,{onClick:b,class:"button",type:"primary"},{default:r(()=>e[7]||(e[7]=[i(" 登录 ")])),_:1})]),_:1}),o(s,null,{default:r(()=>[n.value?(u(),y(p,{key:0,onClick:e[3]||(e[3]=t=>n.value=!1),type:"success"},{default:r(()=>e[8]||(e[8]=[i(" 切换大屏端 ")])),_:1})):(u(),y(p,{key:1,onClick:e[4]||(e[4]=t=>n.value=!0),type:"primary"},{default:r(()=>e[9]||(e[9]=[i(" 切换管理端 ")])),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])])])}}},te=H(K,[["__scopeId","data-v-48c07531"]]);export{te as default};
