import{r as p,u as q,a as L,c as _,b as f,d as a,w as o,o as u,e as E,f as i,g as y,p as P,h as U,E as x,i as $,l as A}from"./index-oRu2cjMH.js";import{E as F,a as M,b as R}from"./el-form-item-BbDMPNc9.js";import{E as Z}from"./el-row-B8cGyQEE.js";import{E as j,a as H}from"./el-input-BDO7TuJp.js";import{E as O}from"./el-link-BitwQTIU.js";import{u as T}from"./user-BI9CrYxB.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./constants-DBJJeGRQ.js";const G=m=>(P("data-v-48c07531"),m=m(),U(),m),J={class:"login-page"},K=G(()=>f("div",{class:"bg"},null,-1)),Q={class:"form"},W={key:0},X={key:1},Y={class:"flex"},ee={__name:"LoginPage",setup(m){const g=p(!0),n=p(!0),v=p(),w=q(),h=L(),r=p({username:"",password:"",repassword:"",phoneNum:""});function V(l,e,s){/^\d{11}$/.test(e)?s():s(new Error("请输入有效的手机号"))}function k(l,e,s){/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e)?s():s(new Error("请输入有效的金额（保留两位小数）"))}const b={username:[{required:!0,message:"未输入用户名",trigger:"blur"},{min:5,message:"用户名必须是 5位 以上的字符",trigger:"blur"}],phoneNum:[{required:!0,message:"未输入电话号码",trigger:"manual"},{validator:V,trigger:"manual"}],password:[{required:!0,message:"未输入密码",trigger:"manual"},{min:8,message:"密码长度至少为8个字符",trigger:"manual"},{validator:k,message:"密码需要包含字母和数字",trigger:"manual"}],repassword:[{required:!0,message:"未输入密码",trigger:"manual"},{min:8,message:"密码长度至少为8个字符",trigger:"manual"},{validator:k,message:"密码需要包含字母和数字",trigger:"manual"},{validator:(l,e,s)=>{e!==r.value.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]},N=async()=>{await v.value.validate();const l=await T({username:r.value.username,password:r.value.password}),e=l.headers.authorization||l.headers.Authorization||"";w.token=e?e.split(" ")[1]:"",w.user={username:r.value.username,phoneNum:r.value.phoneNum},x.success("登录成功"),n.value?h.push("/admin"):h.push("/screen")},S=()=>{x.warning("仔细想想 就想起来了")};return(l,e)=>{const s=M,d=j,B=R,C=O,c=H,I=Z,z=F;return u(),_("div",J,[K,f("div",Q,[a(z,{model:r.value,rules:b,ref_key:"form",ref:v,size:"large",autocomplete:"off"},{default:o(()=>[a(s,null,{default:o(()=>[n.value?(u(),_("h1",W,"管理端登录")):(u(),_("h1",X,"大屏端登录"))]),_:1}),a(s,{prop:"username"},{default:o(()=>[a(d,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.username=t),"prefix-icon":E($),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(s,{prop:"password"},{default:o(()=>[a(d,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.password=t),name:"password","prefix-icon":E(A),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(s,{class:"flex"},{default:o(()=>[f("div",Y,[a(B,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t)},{default:o(()=>[i("记住我")]),_:1},8,["modelValue"]),a(C,{type:"primary",underline:!1,onClick:S},{default:o(()=>[i("忘记密码？")]),_:1})])]),_:1}),a(I,{justify:"space-between"},{default:o(()=>[a(s,{style:{width:"120px"}},{default:o(()=>[a(c,{onClick:N,class:"button",type:"primary"},{default:o(()=>[i(" 登录 ")]),_:1})]),_:1}),a(s,null,{default:o(()=>[n.value?(u(),y(c,{key:0,onClick:e[3]||(e[3]=t=>n.value=!1),type:"success"},{default:o(()=>[i(" 切换大屏端 ")]),_:1})):(u(),y(c,{key:1,onClick:e[4]||(e[4]=t=>n.value=!0),type:"primary"},{default:o(()=>[i(" 切换管理端 ")]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])])])}}},ie=D(ee,[["__scopeId","data-v-48c07531"]]);export{ie as default};
