import{bQ as De,at as ee,ck as Q,J as Se,Z as $e,K as Be,ak as fe,be as Ve,j as ke,q as g,aW as Le,B as me,H as re,bp as ze,z as He,cl as Ye,A as Ue,au as ne,a2 as U,y as Ke,C as Xe,W as ve,i as Ae,b as h,k as ie,L as Ge,_ as Pe,M as We,cm as je,c7 as qe,r as N,G as Ze,aY as pe,bg as ye,cn as Ee,bf as Je,a4 as R,o as m,f as b,w as p,N as oe,a as y,s as c,v as be,al as j,c as te,as as q,ag as D,a5 as Y,aw as Z,e as se,O as ae,T as Qe,V as Ie,$ as Fe,br as _e,c0 as Oe,b$ as ge,ar as Ce,b8 as he}from"./index-BYnOmLgs.js";import{t as xe,a as en,E as nn}from"./el-input-f41vfBh9.js";import{a as on}from"./el-popper-BrjVVlda.js";import{a as Te}from"./constants-CvswaA_c.js";import{a as tn}from"./scroll-CplRQ0RF.js";const sn='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',an=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,we=e=>Array.from(e.querySelectorAll(sn)).filter(n=>ln(n)&&an(n)),ln=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Nn=function(e,n,...s){let t;n.includes("mouse")||n.includes("click")?t="MouseEvents":n.includes("key")?t="KeyboardEvent":t="HTMLEvents";const a=document.createEvent(t);return a.initEvent(n,...s),e.dispatchEvent(a),e},rn=e=>["",...De].includes(e);var J=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(J||{});const le=e=>{const n=ee(e)?e:[e],s=[];return n.forEach(t=>{var a;ee(t)?s.push(...le(t)):Q(t)&&ee(t.children)?s.push(...le(t.children)):(s.push(t),Q(t)&&((a=t.component)!=null&&a.subTree)&&s.push(...le(t.component.subTree)))}),s},un=(e,n,s,t)=>{let a={offsetX:0,offsetY:0};const l=o=>{const T=o.clientX,V=o.clientY,{offsetX:d,offsetY:z}=a,L=e.value.getBoundingClientRect(),v=L.left,H=L.top,w=L.width,A=L.height,X=document.documentElement.clientWidth,F=document.documentElement.clientHeight,_=-v+d,x=-H+z,M=X-v-w+d,G=F-H-A+z,P=S=>{let B=d+S.clientX-T,I=z+S.clientY-V;t!=null&&t.value||(B=Math.min(Math.max(B,_),M),I=Math.min(Math.max(I,x),G)),a={offsetX:B,offsetY:I},e.value&&(e.value.style.transform=`translate(${fe(B)}, ${fe(I)})`)},W=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",W)},r=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",l)},u=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",l)},f=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Se(()=>{$e(()=>{s.value?r():u()})}),Be(()=>{u()}),{resetPosition:f}},cn=(e,n={})=>{Ve(e)||xe("[useLockscreen]","You need to pass a ref param to this function");const s=n.ns||ke("popup"),t=g(()=>s.bm("parent","hidden"));if(!Le||me(document.body,t.value))return;let a=0,l=!1,r="0";const u=()=>{setTimeout(()=>{typeof document>"u"||(Ue(document==null?void 0:document.body,t.value),l&&document&&(document.body.style.width=r))},200)};re(e,f=>{if(!f){u();return}l=!me(document.body,t.value),l&&(r=document.body.style.width),a=tn(s.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,T=ze(document.body,"overflowY");a>0&&(o||T==="scroll")&&l&&(document.body.style.width=`calc(100% - ${a}px)`),He(document.body,t.value)}),Ye(()=>u())},Ne=e=>{if(!e)return{onClick:ne,onMousedown:ne,onMouseup:ne};let n=!1,s=!1;return{onClick:r=>{n&&s&&e(r),n=s=!1},onMousedown:r=>{n=r.target===r.currentTarget},onMouseup:r=>{s=r.target===r.currentTarget}}},ue="_trap-focus-children",k=[],Me=e=>{if(k.length===0)return;const n=k[k.length-1][ue];if(n.length>0&&e.code===Ke.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const s=e.shiftKey,t=e.target===n[0],a=e.target===n[n.length-1];t&&s&&(e.preventDefault(),n[n.length-1].focus()),a&&!s&&(e.preventDefault(),n[0].focus())}},dn={beforeMount(e){e[ue]=we(e),k.push(e),k.length<=1&&document.addEventListener("keydown",Me)},updated(e){U(()=>{e[ue]=we(e)})},unmounted(){k.shift(),k.length===0&&document.removeEventListener("keydown",Me)}},fn=Xe({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:ve([String,Array,Object])},zIndex:{type:ve([String,Number])}}),mn={click:e=>e instanceof MouseEvent},vn="overlay";var pn=Ae({name:"ElOverlay",props:fn,emits:mn,setup(e,{slots:n,emit:s}){const t=ke(vn),a=f=>{s("click",f)},{onClick:l,onMousedown:r,onMouseup:u}=Ne(e.customMaskEvent?void 0:a);return()=>e.mask?h("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:r,onMouseup:u},[ie(n,"default")],J.STYLE|J.CLASS|J.PROPS,["onClick","onMouseup","onMousedown"]):Ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ie(n,"default")])}});const yn=pn,En=Ae({name:"ElMessageBox",directives:{TrapFocus:dn},components:{ElButton:en,ElFocusTrap:on,ElInput:nn,ElOverlay:yn,ElIcon:We,...je},inheritAttrs:!1,props:{buttonSize:{type:String,validator:rn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:s,zIndex:t,ns:a,size:l}=qe("message-box",g(()=>e.buttonSize)),{t:r}=s,{nextZIndex:u}=t,f=N(!1),o=Ze({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:pe(ye),cancelButtonLoadingIcon:pe(ye),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),T=g(()=>{const i=o.type;return{[a.bm("icon",i)]:i&&Ee[i]}}),V=Te(),d=Te(),z=g(()=>o.icon||Ee[o.type]||""),L=g(()=>!!o.message),v=N(),H=N(),w=N(),A=N(),X=N(),F=g(()=>o.confirmButtonClass);re(()=>o.inputValue,async i=>{await U(),e.boxType==="prompt"&&i!==null&&B()},{immediate:!0}),re(()=>f.value,i=>{var E,O;i&&(e.boxType!=="prompt"&&(o.autofocus?w.value=(O=(E=X.value)==null?void 0:E.$el)!=null?O:v.value:w.value=v.value),o.zIndex=u()),e.boxType==="prompt"&&(i?U().then(()=>{var de;A.value&&A.value.$el&&(o.autofocus?w.value=(de=I())!=null?de:v.value:w.value=v.value)}):(o.editorErrorMessage="",o.validateError=!1))});const _=g(()=>e.draggable),x=g(()=>e.overflow);un(v,H,_,x),Se(async()=>{await U(),e.closeOnHashChange&&window.addEventListener("hashchange",M)}),Be(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",M)});function M(){f.value&&(f.value=!1,U(()=>{o.action&&n("action",o.action)}))}const G=()=>{e.closeOnClickModal&&S(o.distinguishCancelAndClose?"close":"cancel")},P=Ne(G),W=i=>{if(o.inputType!=="textarea")return i.preventDefault(),S("confirm")},S=i=>{var E;e.boxType==="prompt"&&i==="confirm"&&!B()||(o.action=i,o.beforeClose?(E=o.beforeClose)==null||E.call(o,i,o,M):M())},B=()=>{if(e.boxType==="prompt"){const i=o.inputPattern;if(i&&!i.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||r("el.messagebox.error"),o.validateError=!0,!1;const E=o.inputValidator;if(typeof E=="function"){const O=E(o.inputValue);if(O===!1)return o.editorErrorMessage=o.inputErrorMessage||r("el.messagebox.error"),o.validateError=!0,!1;if(typeof O=="string")return o.editorErrorMessage=O,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},I=()=>{const i=A.value.$refs;return i.input||i.textarea},ce=()=>{S("close")},Re=()=>{e.closeOnPressEscape&&ce()};return e.lockScroll&&cn(f),{...Je(o),ns:a,overlayEvent:P,visible:f,hasMessage:L,typeClass:T,contentId:V,inputId:d,btnSize:l,iconComponent:z,confirmButtonClasses:F,rootRef:v,focusStartRef:w,headerRef:H,inputRef:A,confirmRef:X,doClose:M,handleClose:ce,onCloseRequested:Re,handleWrapperClick:G,handleInputEnter:W,handleAction:S,t:r}}});function bn(e,n,s,t,a,l){const r=R("el-icon"),u=R("close"),f=R("el-input"),o=R("el-button"),T=R("el-focus-trap"),V=R("el-overlay");return m(),b(Qe,{name:"fade-in-linear",onAfterLeave:d=>e.$emit("vanish"),persisted:""},{default:p(()=>[oe(h(V,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:p(()=>[y("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[h(T,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:p(()=>[y("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:be(e.customStyle),tabindex:"-1",onClick:j(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(m(),te("div",{key:0,ref:"headerRef",class:c([e.ns.e("header"),{"show-close":e.showClose}])},[y("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),b(r,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:p(()=>[(m(),b(q(e.iconComponent)))]),_:1},8,["class"])):D("v-if",!0),y("span",null,Y(e.title),1)],2),e.showClose?(m(),te("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:d=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:Z(j(d=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[h(r,{class:c(e.ns.e("close"))},{default:p(()=>[h(u)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):D("v-if",!0)],2)):D("v-if",!0),y("div",{id:e.contentId,class:c(e.ns.e("content"))},[y("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),b(r,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:p(()=>[(m(),b(q(e.iconComponent)))]),_:1},8,["class"])):D("v-if",!0),e.hasMessage?(m(),te("div",{key:1,class:c(e.ns.e("message"))},[ie(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),b(q(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),b(q(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:p(()=>[se(Y(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):D("v-if",!0)],2),oe(y("div",{class:c(e.ns.e("input"))},[h(f,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":d=>e.inputValue=d,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:Z(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),y("div",{class:c(e.ns.e("errormsg")),style:be({visibility:e.editorErrorMessage?"visible":"hidden"})},Y(e.editorErrorMessage),7)],2),[[ae,e.showInput]])],10,["id"]),y("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(m(),b(o,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:d=>e.handleAction("cancel"),onKeydown:Z(j(d=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:p(()=>[se(Y(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):D("v-if",!0),oe(h(o,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:d=>e.handleAction("confirm"),onKeydown:Z(j(d=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:p(()=>[se(Y(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[ae,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[ae,e.visible]])]),_:3},8,["onAfterLeave"])}var gn=Pe(En,[["render",bn],["__file","index.vue"]]);const K=new Map,Cn=e=>{let n=document.body;return e.appendTo&&(Ie(e.appendTo)&&(n=document.querySelector(e.appendTo)),he(e.appendTo)&&(n=e.appendTo),he(n)||(n=document.body)),n},hn=(e,n,s=null)=>{const t=h(gn,e,Ce(e.message)||Q(e.message)?{default:Ce(e.message)?e.message:()=>e.message}:null);return t.appContext=s,Oe(t,n),Cn(e).appendChild(n.firstElementChild),t.component},Tn=()=>document.createElement("div"),wn=(e,n)=>{const s=Tn();e.onVanish=()=>{Oe(null,s),K.delete(a)},e.onAction=l=>{const r=K.get(a);let u;e.showInput?u={value:a.inputValue,action:l}:u=l,e.callback?e.callback(u,t.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(u)};const t=hn(e,s,n),a=t.proxy;for(const l in e)ge(e,l)&&!ge(a.$props,l)&&(a[l]=e[l]);return a.visible=!0,a};function $(e,n=null){if(!Le)return Promise.reject();let s;return Ie(e)||Q(e)?e={message:e}:s=e.callback,new Promise((t,a)=>{const l=wn(e,n??$._context);K.set(l,{options:e,callback:s,resolve:t,reject:a})})}const Mn=["alert","confirm","prompt"],Sn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Mn.forEach(e=>{$[e]=Bn(e)});function Bn(e){return(n,s,t,a)=>{let l="";return Fe(s)?(t=s,l=""):_e(s)?l="":l=s,$(Object.assign({title:l,message:n,type:"",...Sn[e]},t,{boxType:e}),a)}}$.close=()=>{K.forEach((e,n)=>{n.doClose()}),K.clear()};$._context=null;const C=$;C.install=e=>{C._context=e._context,e.config.globalProperties.$msgbox=C,e.config.globalProperties.$messageBox=C,e.config.globalProperties.$alert=C.alert,e.config.globalProperties.$confirm=C.confirm,e.config.globalProperties.$prompt=C.prompt};const Rn=C;export{Rn as E,yn as a,cn as b,Ne as c,le as f,rn as i,Nn as t,un as u};
